<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Books</title>
</head>
<body>
    <h1>Search Results</h1>
    <% if (data.docs && data.docs.length > 0) { %>
        <ul class="resultsUl">
        <% data.docs.forEach(book => { %>
            <li class="book-item">
                <strong><%= book.title %></strong>
                <div class="book-meta">
                    <% if (book.author_name) { %>
                        <span>by <%= book.author_name.join(', ') %></span>
                    <% } %>
                    <% if (book.first_publish_year) { %>
                        <span>(<%= book.first_publish_year %>)</span>
                    <% } %>
                </div>
                <% if (book.cover_i) { %>
                    <img src="https://covers.openlibrary.org/b/id/<%= book.cover_i %>-M.jpg" 
                         alt="Cover of <%= book.title %>" 
                         class="book-cover">
                <% } %>
            </li>
        <% }) %>
        </ul>
    <% } else if (data.error) { %>
        <div class="error">
            <p><%= data.error %></p>
        </div>
    <% } else { %>
        <p>No books found. Try another search term.</p>
    <% } %>
    <% if (data.numFound > data.docs.length) { %>
        <div class="pagination">
            <% const totalPages = Math.ceil(data.numFound / data.docs.length) %>
            <% for (let i = 1; i <= totalPages; i++) { %>
                <a href="/books?q=<%= query %>&page=<%= i %>"><%= i %></a>
            <% } %>
        </div>
    <% } %>
    <a class="returnLink" href="/">‚Üê Back to search</a>
</body>
</html>
